package net.ccbluex.liquidbounce.features.module.modules.exploit;

import net.ccbluex.liquidbounce.event.EventTarget;
import net.ccbluex.liquidbounce.event.UpdateEvent;
import net.ccbluex.liquidbounce.features.module.Module;
import net.ccbluex.liquidbounce.features.module.ModuleCategory;
import net.ccbluex.liquidbounce.features.module.ModuleInfo;
import net.ccbluex.liquidbounce.value.BoolValue;
import net.ccbluex.liquidbounce.value.IntegerValue;
import net.minecraft.item.ItemBow;
import net.minecraft.item.ItemFood;
import net.minecraft.item.ItemPotion;
import net.minecraft.network.play.client.C03PacketPlayer;

@ModuleInfo(name = "1.17Exploit",spacedName = "1.17 Exploit", description = "1.17 Exploit", category = ModuleCategory.EXPLOIT)
public class Test extends Module {
    private BoolValue c06 = new BoolValue("C06Always", false);
    private BoolValue smart = new BoolValue("SmartC06", false,() -> !c06.get());
    private IntegerValue alwaysC06Amount = new IntegerValue("AlwaysC06Amount",20,1,100,() -> c06.get());

    private IntegerValue hurtC06Amount = new IntegerValue("HurtC06Amount",20,1,100,() -> smart.get());

    private IntegerValue useItemC06Amount = new IntegerValue("UseItemC06Amount",20,1,100,() -> smart.get());

    @EventTarget
    private void onUpdate(UpdateEvent event) {
        if (c06.get()) {
            for (int i = 0; i < alwaysC06Amount.get(); i++) {
                mc.getNetHandler().addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(mc.thePlayer.posX, mc.thePlayer.posY, mc.thePlayer.posZ, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, mc.thePlayer.onGround));
            }
        }
        if(smart.get()){
            if(mc.thePlayer.hurtTime > 0){
                for (int i = 0; i < hurtC06Amount.get(); i++) {
                    mc.getNetHandler().addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(mc.thePlayer.posX, mc.thePlayer.posY, mc.thePlayer.posZ, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, mc.thePlayer.onGround));
                }
            }
            if(mc.thePlayer.isUsingItem() && mc.thePlayer.getHeldItem().getItem() != null && (mc.thePlayer.getHeldItem().getItem() instanceof ItemFood || mc.thePlayer.getHeldItem().getItem() instanceof ItemPotion || mc.thePlayer.getHeldItem().getItem() instanceof ItemBow)){
                for (int i = 0; i < useItemC06Amount.get(); i++) {
                    mc.getNetHandler().addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(mc.thePlayer.posX, mc.thePlayer.posY, mc.thePlayer.posZ, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, mc.thePlayer.onGround));
                }
            }
        }
    }
}
